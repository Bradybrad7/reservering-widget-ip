// Backup of clean email functions

const generateAdminNewBookingEmail = async (
  reservation: Reservation,
  event: Event
): Promise<EmailTemplate> => {
  const eventDate = format(event.date, 'dd-MM-yyyy', { locale: nl });
  
  // Helper function to format arrangement name and price
  const getArrangementInfo = () => {
    const arrangement = reservation.arrangement === 'BWF' ? 'Premium' : 'Deluxe';
    const basePrice = reservation.pricingSnapshot?.basePrice || 0;
    const price = basePrice > 0 ? ` - â‚¬${basePrice.toFixed(2)} per persoon` : '';
    return `${arrangement}${price}`;
  };

  // Helper function to check add-ons
  const getAddOns = () => {
    const addons = [];
    if (reservation.preDrink?.enabled) addons.push('Preparty: Ja');
    if (reservation.afterParty?.enabled) addons.push('Afterparty: Ja');
    if (addons.length === 0) addons.push('Preparty: Nee, Afterparty: Nee');
    return addons.join(', ');
  };

  // Collect all comments and additional info
  const getComments = () => {
    const comments = [];
    if (reservation.comments) comments.push(reservation.comments);
    if (reservation.celebrationOccasion) {
      comments.push(`Gelegenheid: ${reservation.celebrationOccasion}${reservation.partyPerson ? ` voor ${reservation.partyPerson}` : ''}`);
    }
    if (reservation.celebrationDetails) comments.push(`Details: ${reservation.celebrationDetails}`);
    if (reservation.invoiceAddress && reservation.invoiceAddress !== reservation.address) {
      comments.push(`Factuuradres: ${reservation.invoiceAddress} ${reservation.invoiceHouseNumber || ''}, ${reservation.invoicePostalCode || ''} ${reservation.invoiceCity || ''}`);
    }
    if (reservation.invoiceInstructions) comments.push(`Factuurinstructies: ${reservation.invoiceInstructions}`);
    if (reservation.merchandise && reservation.merchandise.length > 0) {
      comments.push(`Merchandise: ${reservation.merchandise.map((item: any) => `${item.quantity}x ${item.itemId}`).join(', ')}`);
    }
    return comments.join('. ');
  };

  const html = `
    <p>U heeft een nieuwe reservatie</p>
    <br>
    <p><strong>Datum:</strong> ${eventDate}</p>
    <p><strong>Bedrijfsnaam:</strong> ${reservation.companyName || ''}</p>
    <p><strong>Aanhef:</strong> ${reservation.salutation || ''}</p>
    <p><strong>Naam:</strong> ${(reservation.firstName + ' ' + reservation.lastName).trim() || reservation.contactPerson || ''}</p>
    <p><strong>Adres:</strong> ${reservation.address || ''}</p>
    <p><strong>Huisnummer:</strong> ${reservation.houseNumber || ''}</p>
    <p><strong>Postcode:</strong> ${reservation.postalCode || ''}</p>
    <p><strong>Plaats:</strong> ${reservation.city || ''}</p>
    <p><strong>Telefoon:</strong> ${reservation.phoneCountryCode || ''}${reservation.phone || ''}</p>
    <p><strong>Email:</strong> ${reservation.email || ''}</p>
    <br>
    <p><strong>Aantal personen:</strong> ${reservation.numberOfPersons || 0}</p>
    <br>
    <p><strong>Gekozen arrangement:</strong> ${getArrangementInfo()}</p>
    <p><strong>${getAddOns()}</strong></p>
    <br>
    <p><strong>Opmerkingen:</strong> ${getComments() || 'Geen'}</p>
    <br>
    <p><strong>Nieuwsbrief:</strong> ${reservation.newsletterOptIn ? 'Ja' : 'Nee'}</p>
    <p><strong>Algemene voorwaarden:</strong> ${reservation.acceptTerms ? 'Ja' : 'Nee'}</p>
  `;
  
  const text = `
U heeft een nieuwe reservatie

Datum: ${eventDate}
Bedrijfsnaam: ${reservation.companyName || ''}
Aanhef: ${reservation.salutation || ''}
Naam: ${(reservation.firstName + ' ' + reservation.lastName).trim() || reservation.contactPerson || ''}
Adres: ${reservation.address || ''}
Huisnummer: ${reservation.houseNumber || ''}
Postcode: ${reservation.postalCode || ''}
Plaats: ${reservation.city || ''}
Telefoon: ${reservation.phoneCountryCode || ''}${reservation.phone || ''}
Email: ${reservation.email || ''}

Aantal personen: ${reservation.numberOfPersons || 0}

Gekozen arrangement: ${getArrangementInfo()}
${getAddOns()}

Opmerkingen: ${getComments() || 'Geen'}

Nieuwsbrief: ${reservation.newsletterOptIn ? 'Ja' : 'Nee'}
Algemene voorwaarden: ${reservation.acceptTerms ? 'Ja' : 'Nee'}
  `;

  return {
    subject: 'Nieuwe reservatie ontvangen',
    html,
    text
  };
};